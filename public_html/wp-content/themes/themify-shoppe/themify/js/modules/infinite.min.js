'use strict';(function(r,f,m,p){let u=null,v=null;const w=[],A=function(a){return new m.IntersectionObserver(function(c,b){for(let e=c.length-1;-1<e;--e)!0===c[e].isIntersecting&&(null===a.button?b.disconnect():z(a))},{threshold:.1})},x=function(a,c){null===v&&(v=new m.IntersectionObserver(function(b,e){for(e=b.length-1;-1<e;--e)!0===b[e].isIntersecting&&m.history.replaceState(null,null,b[e].target.getAttribute("data-tf-history"))},{rootMargin:"100% 0px -100% 0px"}));a.setAttribute("data-tf-history",
f.UpdateQueryString("tf-scroll",null,c));v.observe(a)},y=function(a){return f.UpdateQueryString("tf-scroll",1,a)},B=function(a,c,b){f.lazyScroll(f.selectWithParent("[data-lazy]",a),!0);const e=r(a);!b&&void 0!==m.Isotope&&m.Isotope.data(a)&&(a=a.previousElementSibling,null!==a&&a.classList.contains("post-filter")&&(a=a.querySelector(".cat-item.active:not(.cat-item-all)"),void 0!==a&&r(a).trigger("click.tf_isotop_filter")));e.triggerHandler("infinitebeforeloaded.themify",c);f.trigger("infinitebeforeloaded.themify",
[e,c]);setTimeout(f.reLayoutIsoTop.bind(f),1500)},C=function(a,c,b){const e=a.length,g=r(c),h=void 0!==m.Isotope?m.Isotope.data(c):null;null===u&&(u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));a[0].className+=" tf_firstitem";var n=0;for(c=0;c<e;++c)a[c].style.opacity=0,f.imagesLoad(a[c],function(d){d=d.elements[0];if(u){var k=d.querySelector("img[srcset]");null!==k&&(k.outerHTML=k.outerHTML)}++n;h&&h.appended(d);d.style.opacity="";if(n===e){if(h||g[0].classList.contains("auto_tiles"))b.ajax_loading||
(d=g[0].previousElementSibling,null!==d&&d.classList.contains("post-filter")&&f.body.triggerHandler("themify_isotop_filter",[d])),g[0].classList.contains("auto_tiles")&&f.autoTiles(g[0]);d=r(a);for(k=0;k<e;++k)f.lazyScroll(f.convert(f.selectWithParent("[data-lazy]",a[k])).reverse(),!0);g.triggerHandler("infiniteloaded.themify",[d]);f.trigger("infiniteloaded.themify",[g,d]);if("scroll"===b.scrollToNewOnLoad){d=g[0].getElementsByClassName("tf_firstitem");d=d[d.length-1];d=r(d).offset().top;k=800<=d?
800+Math.abs(d/1E3*100):800;const l=p.getElementById("headerwrap");null!==l&&(l.classList.contains("fixed-header")||f.body[0].classList.contains("fixed-header"))&&(d-=r(l).outerHeight(!0));(!1===b.scrollThreshold||d-p.documentElement.scrollTop>b.scrollThreshold)&&f.scrollTo(d,k)}f.fontAwesome();f.loadWPEmbed(p.getElementsByClassName("wp-embedded-content"));f.checkLargeImages()}})},z=function(a){if(!0!==a.isWorking){a.isWorking=!0;a.status.classList.add("tf_scroll_request");var c={headers:new Headers({"X-Requested-With":"XMLHttpRequest"})};
if(a.filter){var b=a.filter.hasAttribute("data-sort"),e=a.filter.querySelector(".cat-item.active");if(e){a.ajax_loading=e;var g=new FormData;g.append("action","themify_ajax_load_more");g.append("module",a.filter.dataset.el);g.append("id",a.filter.dataset.id);g.append("page",e.dataset.p);e.classList.contains("cat-item-all")||(e=e.getAttribute("class").replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ",""),g.append("tax",e.trim()));b&&(b=a.filter.querySelector(".tf_ajax_sort_order.active"),
e=a.filter.querySelector(".tf_ajax_sort_order_by .active"),b&&g.append("order",b.dataset.type),e&&g.append("orderby",e.dataset.orderBy));c.method="POST";c.body=g;g=themify_vars.ajax_url}}a.ajax_loading||(g=y(a.button.href));fetch(g,c).then(function(h){return h.text()}).then(function(h){var n=(new DOMParser).parseFromString(h,"text/html");h=n.querySelector(a.id);const d=f.UpdateQueryString("tf-scroll",null,a.button.getAttribute("href"));var k=a.container;let l=null;if(null!==h){B(k,n,!!a.ajax_loading);
n=p.createDocumentFragment();const q=f.convert(h.children);l=h.getElementsByClassName("load-more-button")[0];l||(l=h.nextElementSibling);null!==l&&(l.classList.contains("load-more-button")||(l=l.children[0]),l&&l.classList.contains("load-more-button")||(l=null));l&&"A"!==l.tagName&&((l=l.children[0])&&"A"===l.tagName||(l=null));if(void 0!==q[0]){for(let t=0,D=q.length;t<D;++t)n.appendChild(q[t]);k.appendChild(n);a.history&&x(q[0],d);C(q,k,a)}else l=null;a.ajax_loading&&null===l&&(a.ajax_loading.dataset.done=
!0,a.filter.parentNode.classList.add("tb_hide_loadmore"))}a.ajax_loading?(a.ajax_loading.dataset.p=parseInt(a.ajax_loading.dataset.p)+1,a.isWorking=null):(null===l?(a.button.remove(),a.button=null):(k=y(l.getAttribute("href")),void 0!==a.prefetchBtn&&void 0===w[k]&&(w[k]=!0,a.prefetchBtn.setAttribute("href",k)),a.button.href=k,m.addEventListener("scroll",function(q,t){q.isWorking=null}.bind(null,a),{passive:!0,once:!0})),void 0!==m.ga&&(k=p.createElement("a"),k.href=d,ga("set","page",k.pathname),
ga("send","pageview")),a.history&&m.history.replaceState(null,null,d));a.status.classList.remove("tf_scroll_request");return h}).catch(function(h){console.warn("InfiniteScroll error.",h)})}};f.on("tf_infinite_init",function(a,c){a instanceof jQuery&&(a=a[0]);let b=a.getElementsByClassName("load-more-button")[0];b||(b=a.nextElementSibling);if(b){var e=b;if(!b.classList.contains("load-more-button")&&(b=b.children[0],!b||!b.classList.contains("load-more-button"))||"A"!==b.tagName&&(b=b.children[0],!b||
"A"!==b.tagName)||!c.id&&(c.id=a.getAttribute("id"),c.id=c.id?"#"+c.id:"."+a.className.split(" ").join("."),!c.id))return;f.cssLazy.tf_infinite||(f.cssLazy.tf_infinite=!0,f.LoadCss(f.url+"/css/modules/infinite.css"));var g=p.createElement("div");g.className="tf_load_status tf_loader tf_clear tf_hide";a.parentNode.insertBefore(g,a.nextSibling);c.status=g;c.button=b;c.container=a;a.classList.contains("tb_ajax_pagination")&&(g=a.previousElementSibling)&&g.classList.contains("post-filter")&&(c.filter=
g);!1!==c.scrollThreshold?m.addEventListener("scroll",function(h,n){const d=p.createElement("link"),k=y(h.button.getAttribute("href"));d.setAttribute("as","document");d.setAttribute("rel","prefetch");d.setAttribute("href",k);h.button.parentNode.insertBefore(d,h.button.nextSibling);h.prefetchBtn=d;w[k]=!0;x(h.container.children[0],m.location.href);f.imagesLoad(null);A(h).observe(n)}.bind(null,c,e),{passive:!0,once:!0}):(x(a.children[0],m.location.href),b.style.display="inline-block",b.addEventListener("click",
function(h,n){n.preventDefault();delete h.ajax_loading;z(h)}.bind(null,c)))}})})(jQuery,Themify,window,document);
